# 14. バリデータの状態を監視する

バリデータの状態を追跡する最良の方法は、`beaconcha.in` エクスプローラを使うことです（サイト上部のオレンジ色の虫眼鏡をクリックして、自分のバリデータ公開鍵を貼り付けてください）。

**Mainnet**: [beaconcha.in](https://beaconcha.in/)

[ジェネシスブロック開始](https://hackmd.io/@benjaminion/genesis)以降にデポジットした場合は、デポジット時間に応じてバリデータはキューに入れられジェネシス生成後にゆっくりとバリデータセットに組み込まれます。キューを通過するのに数時間から1日程度かかることもあります。

[アカウントを作成して](https://beaconcha.in/register)、アラートを追加したり、バリデータのパフォーマンスを追跡したりすることもできます（[リンク](https://beaconcha.in/dashboard)）。

## バリデータがアタッチされているか確認する

起動時には、`Local validator attached`というログメッセージが表示されるはずです。これにはバリデータの公開鍵である `pubKey` フィールドがあります。

## IPアドレスを確認する

Nimbusが外部IPを正しく認識していることを確認してください。これを行うには、最初のログ行の最後を見てください。

```text
Starting discovery node","topics":"discv5","tid":2665484,"file":"protocol.nim:802","node":"b9*ee2235:<IP address>:9000"
```

`<IP address>`は、外部IP（インターネットからアクセスできるIP）と一致している必要があります。

ポート番号はIPの直後に表示されることに注意してください。上記の場合は`9000`です。これがオープンしてマッピングされるべきポートです。

## 同期の進捗状況を把握する

同期の進行状況を確認するには、バリデータを実行しているターミナルウィンドウの一番下にある出力を見てください。以下のようなものが表示されているはずです。

```text
peers: 35 ❯ finalized: ada7228a:8765 ❯ head: b2fe11cd:8767:2 ❯ time: 9900:7 (316807) ❯ sync: wPwwwwwDwwDPwPPPwwww:7:4.2313:4.0627:03h01m(280512)
```

そこには、

* `peers` は、現在接続しているピアの数を表示します（上の例では 35 ピア）
* `finalized` は、これまでに同期した最新のファイナライズ済みエポック（8765番目のエポック）を表示します。
* `head`は、これまでに同期したスロットのうち、最も新しいスロット（8767エポックの第2スロット）を教えてくれます。
* `time` は、ジェネシスブロック（9900エポックの第7スロット、言い換えると316,807番目のスロット）から現在までの時刻を教えてくれます。
* `sync` には、現在の同期速度（4.2313 ブロック/秒）と、同期してからの平均同期速度（4.0627 ブロック/秒）、完全に同期されるまでの残り時間（3 時間 1 分）、これまでに同期したブロック数 （280,512）、現在接続している最もパフォーマンスの高い 20 人の同期ワーカーとリンクしている 20 人の同期ワーカーの情報（文字列と数字）が表示されます。

文字の羅列 -- 私たちが `sync worker map`と呼んでいるもの（上記の場合は `wPwwwwwDwwDPwPPPww` とある部分）は、上記の同期ワーカーの状態を表しています。

```text
    s - sleeping (idle),
    w - waiting for a peer from PeerPool,
    R - requesting blocks from peer
    D - downloading blocks from peer
    P - processing/verifying blocks
    U - updating peer's status information
```

それに続く数字（上記のケースでは`7`とある部分）は、現在活躍しているワーカーの数を表しています（つまりスリープしていない、ピアを待っていない）。

{% hint style="info" %}
Nimbusをサービスとして実行している場合、上記のステータスバーは表示されません。同様の情報を取得するには、[APIページ](https://status-im.github.io/nimbus-eth2/api.html)で概説されているRPCコールを使用することができます。
{% endhint %}

